<?xml version="1.0" encoding="utf-8" ?>
<local:BaseContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:NoveoNative"
             x:Class="NoveoNative.CreateChannelPage"
             x:Name="ThisPage"
             BackgroundColor="{Binding PageBgColor}"
             NavigationPage.HasNavigationBar="False"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto,*" BackgroundColor="{Binding PageBgColor}">

        <!-- Custom Header -->
        <Border Grid.Row="0" BackgroundColor="{Binding CardBgColor}" Padding="15,10" StrokeThickness="0">
            <Grid ColumnDefinitions="Auto,*">
                <Button Grid.Column="0" Text="â†" BackgroundColor="Transparent" 
                        TextColor="{Binding PageTextColor}" FontSize="24" 
                        Clicked="OnClose" WidthRequest="40" HeightRequest="40"/>
                <Label Grid.Column="1" Text="Create Channel" FontSize="20" FontAttributes="Bold"
                       TextColor="{Binding PageTextColor}" VerticalOptions="Center" Margin="10,0,0,0"/>
            </Grid>
        </Border>

        <ScrollView Grid.Row="1" Padding="20">
            <VerticalStackLayout Spacing="20">

                <!-- Avatar Preview -->
                <Border StrokeShape="RoundRectangle 60" 
                        HeightRequest="120" WidthRequest="120" 
                        HorizontalOptions="Center" 
                        BackgroundColor="{Binding InputBgColor}"
                        Stroke="{Binding BorderColor}"
                        StrokeThickness="2">
                    <Grid>
                        <Label Text="#" FontSize="48" TextColor="{Binding PlaceholderColor}" 
                               HorizontalOptions="Center" VerticalOptions="Center" 
                               IsVisible="{Binding ShowDefaultAvatar}"/>
                        <Image x:Name="AvatarPreview" Aspect="AspectFill" IsVisible="{Binding HasSelectedAvatar}"/>
                    </Grid>
                </Border>

                <Button Text="Choose Channel Avatar" 
                        Clicked="OnSelectAvatar" 
                        BackgroundColor="#3b82f6" 
                        TextColor="White"/>

                <!-- Channel Name -->
                <Border BackgroundColor="{Binding CardBgColor}"
                        StrokeThickness="1" Stroke="{Binding BorderColor}"
                        Padding="15" StrokeShape="RoundRectangle 12">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Channel Name" FontAttributes="Bold" TextColor="{Binding PageTextColor}"/>
                        <Border StrokeShape="RoundRectangle 8" 
                                Stroke="{Binding BorderColor}" 
                                Padding="10,5" 
                                BackgroundColor="{Binding InputBgColor}">
                            <Entry x:Name="ChannelNameEntry" 
                                   Placeholder="e.g., Tech News" 
                                   BackgroundColor="Transparent"
                                   TextColor="{Binding PageTextColor}"
                                   PlaceholderColor="{Binding PlaceholderColor}"/>
                        </Border>
                    </VerticalStackLayout>
                </Border>

                <!-- Channel Handle -->
                <Border BackgroundColor="{Binding CardBgColor}"
                        StrokeThickness="1" Stroke="{Binding BorderColor}"
                        Padding="15" StrokeShape="RoundRectangle 12">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Channel Handle" FontAttributes="Bold" TextColor="{Binding PageTextColor}"/>
                        <Border StrokeShape="RoundRectangle 8" 
                                Stroke="{Binding BorderColor}" 
                                Padding="0" 
                                BackgroundColor="{Binding InputBgColor}">
                            <HorizontalStackLayout Spacing="0">
                                <Label Text="@" FontSize="16" TextColor="{Binding PlaceholderColor}" 
                                       VerticalOptions="Center" Padding="10,0,5,0"/>
                                <Entry x:Name="HandleEntry" 
                                       Placeholder="technews" 
                                       BackgroundColor="Transparent"
                                       TextColor="{Binding PageTextColor}"
                                       PlaceholderColor="{Binding PlaceholderColor}"
                                       HorizontalOptions="FillAndExpand"/>
                            </HorizontalStackLayout>
                        </Border>
                        <Label Text="Only letters, numbers, and underscores" 
                               FontSize="12" TextColor="{Binding PlaceholderColor}"/>
                    </VerticalStackLayout>
                </Border>

                <Label x:Name="StatusLabel" 
                       TextColor="Red" 
                       HorizontalOptions="Center" 
                       IsVisible="False"/>

                <Button Text="Create Channel" 
                        BackgroundColor="#22c55e" 
                        TextColor="White" 
                        Clicked="OnCreateChannel"
                        Margin="0,10,0,0"/>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</local:BaseContentPage>
